<?php
/**
 * Public functions
 *
 * Contains public facing action hooks (for use in templates and patterns)
 *
 * Author: Willem Prins | SOMTIJDS
 * Project: Tandem
 * Date created: 31/03/2016
 *
 * @package Exchange Plugin
 **/

// Exit if accessed directly.
if ( ! defined( 'ABSPATH' ) ) {
	header( 'Status: 403 Forbidden' );
	header( 'HTTP/1.1 403 Forbidden' );
};


function exchange_hex_to_slug( $hex ) {
	$color_array = $GLOBALS['EXCHANGE_PLUGIN_CONFIG']['COLOURS'];
	$clean_hex = str_replace( '#','',strtolower( $hex ) );
	if ( is_array( $color_array ) && in_array( $clean_hex,$color_array ) ){
		$retval = array_keys( $color_array,$clean_hex,TRUE );
		if ( ! empty( $retval ) ) {
		  return $retval[0];
		}
	}
	return 'custom-colour';
}

function exchange_slug_to_hex( $slug ) {
	$color_array = $GLOBALS['EXCHANGE_PLUGIN_CONFIG']['COLOURS'];
	if ( is_array( $color_array ) && array_key_exists( $slug, $color_array ) ) {
		$retval = $color_array[ $slug ];
		if ( ! empty( $retval ) ) {
		  return '#' . $retval;
		}
	}
}

/**
 * Pick black or white to contrast with chosen hexcolor
 *
 * @param string $hex Colour value

 * @return string black or white
 */
function exchange_get_contrast_YIQ( $hex ) {
	$r = hexdec( substr( $hex,0,2 ) );
	$g = hexdec( substr( $hex,2,2 ) );
	$b = hexdec( substr( $hex,4,2 ) );
	$yiq = ( ( $r*299 )+( $g*587 )+( $b*114 ) )/1000;
	return ( $yiq >= 128 ) ? 'white' : 'black';
}

/**
 * Create link (or simply an opening tag)
 *
 * @param $object mixed Exchange object, term or ID
 * @param bool @with_text Optional. Add object title as link text, or simply open tag.

 * @return string Anchor tag with appropriate attributes and / or title.
 */
function exchange_create_link( $obj, $with_text = true, $class = '' ) {
	// Turn post_id into object
	if ( is_numeric( $obj ) && exchange_post_exists( $obj ) ) {
		$obj = BaseController::exchange_factory( $obj );
	}
	if ( $obj instanceof Exchange ) {
		$url = $obj->link;
		$title = $obj->title;
		$label = $obj->title;
		$cat = 'story';
	} elseif ( $obj instanceof WP_Term ) {
		$url = get_term_link( $obj );
		$title = $obj->name;
		$label = $obj->name;
	}
	$button_classes = array(
		'griditem__button button--small',
	);
	if ( in_array( $class, $button_classes, true ) ) {
		if ( empty( $obj->category ) ) {
			$label = strtoupper( __( 'Read more', 'exchange' ) );
		} else {
			$cat = $obj->category->slug;
			$labels = $GLOBALS['EXCHANGE_PLUGIN_CONFIG']['CATEGORIES']['button_labels'];
			if ( array_key_exists( $cat, $labels ) ) {
				$label = strtoupper( sprintf( $labels[ $cat ], $cat ) );
			} else {
				$label = strtoupper( sprintf( $labels['default'], $cat ) );
			}
			$class .= ' button--' . $cat;
		}
	}
	if ( ! empty( $url ) && ! empty( $title ) ) {
		$output  = '<a class="' . $class . '" href="' . $url . '" title="' .sprintf( esc_html__( 'Navigate to %s', EXCHANGE_PLUGIN ), esc_attr( $title ) ).'">';
		if ( $with_text ) {
			$output .= $label . '</a>';
		}
		return $output;
	} else {
		return false;
	}
}

function exchange_build_breadcrumb_base( $exchange ) {
	global $post;
	$arrow = '<li>' . exchange_build_svg( get_stylesheet_directory() . '/assets/images/svg/T_arrows_Single_WEB.svg' ) . '</li>';
	$title_string = $exchange->title;
	$tag = '';
	$maxchars = $GLOBALS['EXCHANGE_PLUGIN_CONFIG']['BREADCRUMBS']['max-chars-default'];
	switch( $exchange->type ) {
		case 'story':
			$type_string = 'Stories';
			$maxchars = $GLOBALS['EXCHANGE_PLUGIN_CONFIG']['BREADCRUMBS']['max-chars-story'];
			break;
		case 'collaboration':
			$type_string = 'Collaborations';
			$maxchars = $GLOBALS['EXCHANGE_PLUGIN_CONFIG']['BREADCRUMBS']['max-chars-collaboration'];
			if ( ! empty( $exchange->programme_round ) && is_string( $exchange->programme_round->term ) ) {
				$participant_list = array();
				$tag = '<li>' . exchange_create_link( $exchange->ordered_tag_list[0] ) . '</li>' . $arrow;
			}
			if ( ! empty( $exchange->participants ) ) {
				foreach( $exchange->participants as $participant ) {
					$participant_list[] = $participant->title;
				}
				if ( count( $participant_list ) > 0 ) {
					$title_string = implode( ' & ', $participant_list );
				}
			}
			break;
		case 'page':
			$parent = get_post( $post->post_parent );
			$type_string = $parent->post_title;
			break;
		default:
			return;
	}
	$type = '<li><a href="' . get_post_type_archive_link( $exchange->type ) . '">' . $type_string . '</a></li>' . $arrow;
	if ( strlen( $title_string ) > $maxchars ) {
		$title_string = substr( $title_string, 0, $maxchars ) . __( '...', EXCHANGE_PLUGIN );
	}
	$title = '<li><span class="show-for-sr">Current: </span>'. $title_string. '</li>';
	return '<ol>' . $type . $tag . $title . '</ol>';
}

/**
 * Get focus points for this image
 *
 * Add modifiers array with data properties if a focus point has been set.
 *
 * @param array $thumb ACF Image array
 * @return array $focus_points;
 */
function exchange_get_focus_points( $thumb ) {
	if ( ! class_exists('TstPostOptions') ) {
		return;
	}
	$focus_position = get_post_meta( $thumb['ID'], 'theiaSmartThumbnails_position', false );
	if ( empty( $focus_position ) ) {
		return;
	}
	$h = is_array( $focus_position[0] ) ? $focus_position[0][1] : null;
	$w = is_array( $focus_position[0] ) ? $focus_position[0][0] : null;
	if ( ! empty( $h ) && ! empty( $w ) ) {
		$focus_points['focus_h'] = $h;
		$focus_points['focus_w'] = $w;
		return $focus_points;
	}
}

/**
 * Determines if a post, identified by the specified ID, exist
 * within the WordPress database.
 *
 * Note that this function uses the 'acme_' prefix to serve as an
 * example for how to use the function within a theme. If this were
 * to be within a class, then the prefix would not be necessary.
 * Via: https://tommcfarlin.com/wordpress-post-exists-by-id/
 *
 * @param    int    $id    The ID of the post to check
 * @return   bool          True if the post exists; otherwise, false.
 * @since    1.0.0
 */
function exchange_post_exists( $id ) {
  return is_string( get_post_status( $id ) );
}

function exchange_build_svg( $svg_src, $fallback = false) {
	if ( ! is_string( $svg_src ) || '' === $svg_src ) {
		return;
	}
	if ( ! is_readable( $svg_src ) ) {
		return;
	}
	$svg = file_get_contents( $svg_src );
	if ( $fallback ) {
		$png_src = str_replace( 'svg', 'png', $svg_src );
		$svg = exchange_insert_svg_fallback( $svg, $png_src );
	}
	return $svg;
}

function exchange_insert_svg_fallback( $svg, $png_src ) {
	// Add png fallback if available.
	if ( ! is_readable( $png_src ) ) {
		return $svg;
	} else {
		$png_insert = '<image src="' . $png_src . '" xlink:href=""></svg>';
		$svg = substr_replace( $svg, $png_insert, -6 );
		return $svg;
	}
}

/**
 * Build social buttons.
 *
 * @param string $context Context for the buttons.
 * @return return HTML string with social buttons
 */

function exchange_build_social_icons( $context = '', $platforms = array(), $exchange = null ) {
	if ( empty( $platforms ) ) {
		return;
	}
	$site_url = get_bloginfo( 'url' );
	$site_name = get_bloginfo( 'name' );
	$encoded_url = urlencode( $site_url );
	$encoded_name = urlencode( $site_name );
	$icon_colour = exchange_slug_to_hex('yellow-tandem');
	$circle = '';
	$circle_fallback = '';
	if ( in_array( $context, array( 'footer', 'section' ), true ) ) {
		$circle = '<path d="M22.32 179.36c-.87.25-.57-2.35-1.37-1.04.6.02.7 2.23 1.37 1.03m-6.5-113.82c-.28.08-.4.3-.35.7.27-.1.4-.3.34-.7.5-.1.4-.75.7-1.03.43-.14.7-.44.68-1.03-1.46-.3-1.47.82-1.38 2.06m-1.7 3.1c.83.52 1-1.18.33-1.04-.02.2-.05.4-.34.33v.7zm13 119.28c-1.05.07-1.53-1.2-1.02-1.7-.22-1.04-1.3-1.2-1.02-2.74-.83-.13.2 1.57-1.03 1.03-.2-.73-.85-1-.7-2.06-.18-.5-.52-.84-1.02-1.03-.17-.5-.5-.86-.67-1.36-.8.1-.38-1-1.03-1.03-.18-.5-.5-.86-.7-1.36-.3-.6-.75-1.07-1.36-1.38.06-.4-.07-.6-.34-.68.28-1.88-1.14-2.06-1.03-3.77-.44.1-.46 1.03 0 1.04.1.55-.33.6-.35 1.03-.98.05-.42-1.45-1.03-2.05-.26-1.05.6-1 .33-2.06-.3-.22-.6-.42-.68 0 0 .33-.42.26-.7.33 0-1.04-1.44-1.98.36-2.06-.3-.28-.2-.94-.7-1.03-.16-.27-.34-.55-.32-1.02-.67-.24-.9-.9-1.02-1.7-.13.07-.6-.13-.7 0 0 0 .03.33 0 .33-.26.03-.33-.4-.67-.33 0-.58-.26-.88-.7-1.02.04-.5.07-.97-.33-1.03.16-1.08-.5-1.34-.7-2.06-.48-.08-.1-1.03-.67-1.04-.17-.27-.35-.55-.34-1.02-.2-.72-.85-.98-.68-2.06.7-.12 1.07.07 1.03.68.9-.03.7-1.14.7-2.05-.8-.1-1.3.1-1.37.7-.5-.1-.12-1.03-.68-1.04.1-.55-.33-.58-.35-1.02-.2-1.1.23-1.6.34-2.4 0-.6-.26-.9-.7-1.02.16-.7-.22-.9-.33-1.36-1.02.42.4 1.18 0 2.05-.77.1-.36-1-1-1.03.03-.62-.43-.73-.35-1.38.48.02.97.05 1.02-.35.17-1.06-.92-.9-1.02-1.7v-1.03c-.06-.4.07-.6.34-.68 0-.7-.95-.44-.7-1.38-1 0 .5 2.54-1.03 2.06v-3.42c.28-.18.56-.36 1.03-.34.15.5.3-.04.68 0 .13-.58-.27-.65-.7-.68-.26-.07-.33-.35-.67-.35.25-2.4-.43-3.9-.67-5.83-.9-.1.32 1.92-1.03 1.37-.23-.83-.7-1.76.68-1.7-.47-.45-.34-1.5-.34-2.4-.76-.05-.15-1.46-.35-2.07-1.1-.42-.28 1.1-1.4.7-.2-1.38.9-1.4.7-2.75-.82-.14.2 1.56-1.03 1.03-.35-.9-.4-2.1-.34-3.43.37-.1.23-.68.68-.7.3-.14.63-.3.7-.67-.12-.4-.6-.87-.7-.35-.44.42-.53.15-1.02 0-.3-1.3-.45-2.74-.35-4.44 1.35-.55.12 1.48 1.03 1.37v2.06c.58.1.65-.3.7-.7v-1.38c.24-1.06-.96-.66-.7-1.72-.05-.84.54-1.05.7-1.7.02-1.4.05-2.8-.36-3.77.08-.32-.1-.7 0-1.03.04-.12.35-.44.35-.34.02-.62-.4-.73-.35-1.37.46-.25.64-.76.7-1.4-.05-.6.4-.72.33-1.37.34-.8.6-1.68.7-2.74.03-.6-.43-.73-.36-1.38-.2-.27-.36-.56-.35-1.03-.58.12-.65-.28-.68-.7.02-1.53.78-.43 1.37-1.02-.26-2.1.46-3.22.35-5.15-.42.15-.7.44-.7 1.02.08.3-.12.33-.33.35.25.8.94 2.92-.68 2.74-.1-.12.1-.6 0-.68-.03-.02-.34.02-.35 0 0-.08-.06-.65 0-.7 0 0 .34.02.34 0 .02-.62-.02-1.04 0-2.05.35-.77.2-2.06.68-2.73.93-.26-.24 1.6.7 1.36.45-.1.27-.86.33-1.37.28-.2.56-.37 1.03-.35-.3-.84-.66-2.65 0-3.42.26-1.05-.58-1-.34-2.06.72-.2 1.1-.72 1.72-1.03-.37-1.3.85-.98.68-2.06-.08-.43-.68-.35-.68 0-.4-.06-.3-.63-.34-1.03v-1.36c.25-1.12.62-2.12 1.02-3.1.97.6.33.9.35 2.07-.1.46-.6.55-.7 1.04v1.37c.35 0 .28-.4.35-.7.3.1.33-.1.35-.32-.02-.5-.05-.97.35-1.03.27-.77.72-1.35.7-2.4.36-.1.22-.7.67-.7.07-.27.35-.34.34-.68.65-.04.24-1.13 1.03-1.03-.24-1.26.72-1.32.67-2.4.92-.1.6-1.45 1.37-1.72-.03-.5-.06-.97.34-1.03v-2.4c.96-.07.42-1.64 1.7-1.38.32-1.17.52-2.46 1.04-3.43v-2.4c.43-.5 1.67-.16 1.7-1.04.66-.14.63-.98 1.72-.68-.14-.54-1.07-.3-.68-1.37.48-.02.97-.05 1.03.35.8.1.4-.98 1.02-1.02.2-.5.54-.84 1.03-1.03-.04-.6.42-.72.35-1.37.7-.1.68-.93 1.38-1.03-.24-.92.7-.66 1.03-1.03-.26-1.64 1.5-1.23 1.04-3.08 1.03.4 1.17.1 2.06-.35-.22-.33.32-.3.33-.35.05-.24-.6-.82-.34-1.37.3 0 .25-.42.32-.68.3.06.33-.14.35-.35.4-.05.3-.62.34-1.02.7-.1.68-.93 1.38-1.03-.08-.98-.05-1.87 1.02-1.72.1.56-.33.6-.34 1.03.8.12.38-.98 1.02-1.02.37-.32.1-1.26 1.03-1.02.5-.15-.12-.44 0-1.03.46-.4.55-.15 1.04 0 .6-.3.57-1.28 1.37-1.38.3-.6.78-1.07 1.38-1.38.2-.7.72-1.1 1.03-1.7.38-.1.24-.7.7-.7.18-.27.36-.55.34-1.02.8-.1.64-1.2 1.7-1.03.06-.65.24-1.16.7-1.38.14-.83-.63-.75-.34-1.72.58-.12.64.27.68.7.86.05 1.08-.54 1.37-1.04.38-.1.24-.68.7-.7.27-.05.33-.33.68-.33-.13-.45-.6-.54-.7-1.03v-1.37c.34 0 .28-.42.35-.68h.7c.32-.02.25-.43.33-.7.3.06.33-.13.35-.34.28-.04.35-.36.7-.33-.05 0 .12.33.33.34h.34c.05-.6-.4-.72-.34-1.36.54-.04 1.3.15 1.37-.36.5.03.97.06 1.03-.34.54.03 1.3-.16 1.37.34.5-.2.84-.53 1.03-1.02h1.7c.35 0 .28-.42.36-.7.3.07.32-.12.34-.33.3-.17.6-.3.7-.7 1.2-.15 1.87-.86 2.4-1.7.26.05.33.33.67.33.6-.3 1.06-.77 1.37-1.37H59c.34 0 .27-.43.35-.7.3.07.32-.13.34-.34.4-.05.3-.62.33-1.03h1.37c.9-.37 1.66-.86 2.07-1.7h1.03c.8-.12.64-1.2 1.7-1.04.32-.6 1.27-.58 1.38-1.38.4-.07.6.06.7.33.48-.2.83-.53 1.02-1.03 1.05.25 1.25-.35 2.05-.34.43-.15.7-.44.7-1.03h1.02c.6-.3 1.06-.77 1.37-1.37.3-.1.75.13 1.03 0 .15-.07.2-.63.34-.7.14-.04.63.1.7 0 .03 0-.02-.32 0-.33.33-.1.7.07 1.03 0 .66-.14.63-.98 1.72-.68.05-.4.62-.3 1.03-.35 0-.33.42-.26.68-.34.1-.37.68-.23.7-.68h1.02c-.25-.94 1.6.24 1.37-.7h1.7c.96-.4 1.75-1 3.1-1.02.65-.14.62-.98 1.7-.68.42-.45.15-.54 0-1.03-.08-.56.34-.6.35-1.03.73-.16.65.5.68 1.03.55.1.6-.33 1.03-.35 1.04-.4-1.24-.3-.67-1.37h1.72c.7-.1.67-.92 1.37-1.03h2.75c.83-.14.75.63 1.7.35.73-.15.92.23 1.4.34 3.52-.22 5.76.85 9.24.7 1.63.3 3.1.76 5.14.67.56-.1.6.33 1.03.34 3.27-.17 5.36.83 8.57.7.56-.1.6.3 1.03.34h2.74c2.3.55 4.77.96 7.55 1.03.56-.1.6.33 1.03.34h3.1c.54-.1.58.34 1.02.36 3.32-.14 5.62.77 8.9.68.8 0 1 .6 2.06.35.27.17.55.34 1.02.33.4-.06.6.07.7.34.2.04.46-.05.67 0 .35.1.17.26.35.34.12.07.6-.1.68 0 .03.05-.03.34 0 .36.6.2 1.24.18 2.06.34.04.64 1.13.23 1.03 1.02 1.08-.17 1.2.62 2.4.34 0 .33.42.27.68.34.24.9 1.56.73 1.72 1.72.72.42 1.33.95 2.06 1.37 0 .66.93.4.68 1.35.5.2.86.53 1.05 1.03 1.33.37 1.75 1.66 3.08 2.05 0 .68.94.43.7 1.37.5.17.85.5 1.36.68.14.42.43.7 1.02.7.36.9 1.37 1.14 1.72 2.04.97-.28.9.5 1.72.35.15.3.3.6.68.67.1.37.68.23.7.7 1.04-.27.65.93 1.7.67.43.73.95 1.35 1.37 2.07.7-.14.9.23 1.38.34.08.4.68.25.68.7.97.06 1.43.63 2.4.68.25.8 1.03 1.04 1.7 1.4.32.6 1.28.55 1.4 1.36.6-.05.7.42 1.36.34.46.12.55.6 1.04.7-.15 1.73.52 2.66 1.02 3.76.83.14.75-.63 1.72-.35-.3 1.33.84 1.22 1.03 2.06.38.1.24.68.7.7.17.26.35.54.33 1 .3.62.77 1.08 1.38 1.4-.08 1 .78 1.04.7 2.04.1.46.6.55.68 1.04.33 0 .26.42.34.7.3-.08.32.12.34.33.43.15.7.44.7 1.03.4.15.7.44.67 1.03 1 .15.8 1.47 1.72 1.7-.2 1.22 1.2.85 1.02 2.07.45.35 1.26.33 1.7.68-.03.62.43.73.35 1.37.38.1.23.7.7.7-.17 1.07.9.9 1.02 1.7.3.6.8 1 1.02 1.72.67.23.9.9 1.02 1.7.45.13.54.6 1.03.7.56-.1.6.32 1.03.34v1.4c.33.7.7 1.35 1.03 2.05-.03.58.24.9.67 1.03-.02.48-.05.97.35 1.02.3.27.2.93.68 1.02.18.28.36.56.35 1.03.5.08.12 1.02.68 1.03.15.3.3.6.7.7v1.7c.03.65 1.12.24 1 1.03.14.47.62.56.7 1.05.35.8 1.18 1.1 1.03 2.4.3.6.82 1 1.02 1.7.3.62.82 1 1.02 1.72.7 1 .86 2.57 1.37 3.77v2.4c-.06.4.07.6.34.7-.06.4.08.6.34.68-.2.83-.5 1.57-.34 2.75.12.8.35 1.47 1.03 1.7-.05.86-.07 1.67.68 1.73-.1.8.06 1.3.35 1.7V96c-.06.62.4.73.33 1.38.5.08.12 1.02.7 1.03-.06.84-.07 1.65.33 2.06-.23 1.25-.48 2.5-.34 4.1.07.5 1.02.13 1.02.7.38.08.24.68.7.68-.35 1.38-.43 3-.35 4.8-.08.85.52 1.06.66 1.7v2.4c-.1.57.33.6.34 1.04.1 1.17-.25 2.78.36 3.43.3 1.1-.54 1.07-.7 1.7-.24.96.7.7.7 1.4-.14 1.6.6 2.35.34 4.1.25.94-.68.7-.7 1.38-.08.55.34.6.36 1.03.25.94-.68.7-.7 1.38-.48.08-.1 1.02-.67 1.03-.15 1.03-.57 1.75-1.05 2.4-.14.83.62.75.34 1.7-.4.08-.3.65-.35 1.05-.4.06-.3.63-.34 1.03-.4-.06-.6.08-.7.34.08.3-.1.33-.32.35v1.37c-.04.5-.07.98.33 1.04-.26.3-.36.77-.33 1.36-.2.97-.52 1.8-.7 2.75-.46.1-.28.85-.34 1.36-.4.05-.3.62-.34 1.03-.8.1-.78 1.05-1.4 1.36v2.05c-.32 0-.25.43-.33.7-.3-.07-.32.13-.34.33-.33 0-.27.42-.34.7-.3-.07-.34.12-.36.33-.26.3-.37.78-.34 1.37-.37.1-.23.68-.68.7-.05.6.4.7.34 1.36-.46.1-.55.6-1.04.67-.3.28-.2.94-.7 1.03-.3.7-.7 1.35-1.02 2.05-.14.72.24.9.35 1.37-.1 1.17-.88 1.65-.7 3.1-.46.2-.64.72-.68 1.36-.8.23-.92 1.14-1.72 1.37.14 1.63-1.17 1.8-1.03 3.43-.8-.1-.38 1-1.02 1.03.14.84-.63.76-.35 1.73-.8-.1-.38 1-1.03 1.03-.26.3-.36.77-.34 1.37-.72.42-1.3 1-1.7 1.7-1.23-.17-.85 1.23-2.07 1.04-.04.64-.2 1.15-.67 1.37-.45.12-.54.6-1.03.7.14.82-.63.73-.35 1.7-.6.32-1.2.64-1.02 1.72-.6.3-1.07.76-1.37 1.37-.3.6-.82 1-1.02 1.7-.5.2-.84.55-1.03 1.04-.9-.24-.65.7-1.02 1.03h-1.03c-.3.7-1.05 1-1.04 2.04-1.02.35-1.7 1.03-2.04 2.06-.6-.04-.72.42-1.36.34.24 1.05-.6 1-.35 2.06-.52.18-.87.5-1.38.7.25.92-.68.68-.68 1.36-.73.2-1.1.72-1.73 1.03-.33 0-.27.4-.34.66-.3-.06-.33.14-.34.34-.6 0-.9.27-1.04.7-.7.42-1.33.95-2.05 1.37-1.56 1.06-2.53 2.72-4.1 3.77.28.97-.5.9-.35 1.72-1 .02-1.28.78-1.72 1.37-.6.3-1.06.77-1.37 1.37-.93-.25-.68.68-1.36.7-.68 0-.44.92-1.37.67-.14.83.62.75.34 1.7-.6.32-1.05.78-1.36 1.4h-1.36c-.3.14-.62.3-.7.67-.4-.05-.6.08-.67.34-1.05-.25-1 .6-2.06.35-.1.7-1.27.32-1.36 1.03-1.4.18-2.22.98-3.77 1.02-.65.5-1.8.5-2.06 1.38-.53.02-1.3-.17-1.36.34-.3.26-.78.37-1.37.34-.86.28-1.35.94-2.4 1.03-.84.3-1.5.8-2.75.68-.07.5-1.02.12-1.02.7-.62-.05-.73.4-1.37.33-.6.3-1 .83-1.72 1.03-.1.83-1.05.8-1.36 1.4h-2.06c-.26.3-.93.2-1 .7-.5-.05-1-.08-1.04.32-.55.04-1.3-.15-1.37.36-.5-.04-.98-.06-1.04.34-3.48-.06-5.7 1.15-8.92 1.37-.54-.1-.6.3-1 .33-.1.38-.7.24-.7.7-.4-.4-1.2-.4-2.06-.35-.4-.05-.6.08-.68.35-.4-.06-.62.07-.7.34-.9 0-1.96-.13-2.4.34h-2.74c-.55-.1-.6.34-1.03.35h-2.75c-.5-.02-.98-.05-1.04.35-.8-.1-1.3-.54-2.4-.35-2.45.63-5.92.24-8.9.35-.4.05-.6-.08-.7-.35-.4.06-.6-.07-.67-.34-1.4.16-2.2-.3-3.1-.67h-2.4c-1 .1-1.04-.78-2.04-.7-.45-.46-1.63-.2-2.07-.68-1.88.05-3.26-.4-4.8-.68-1.05-.25-1.25.35-2.06.34-.8-.1-1.28-.53-2.4-.33-.58 0-.88-.26-1.03-.68-.5 0-.98.04-1.03-.36h-1.7c-.1-.48-1.03-.1-1.04-.68h-1.7c-.95.25-.7-.68-1.38-.68-.64-.05-1.15-.23-1.37-.7h-1.7c-.1-.6-.6-.77-1.38-.67-.1-.46-.86-.3-1.37-.33 0-.34-.4-.27-.67-.35-.28-.06-.35-.34-.7-.34-.3-.27-.76-.37-1.36-.34-.12-.45-.6-.54-.7-1.03-.9.04-1.35-.23-2.04-.7-.07-.02-.3.08-.35 0-.04-.02.05-.3 0-.32-.48-.23-.87-.1-1.37-.34-.16-.08.05-.33-.33-.34-.28-.02-.34-.4-.7-.35-.23-.9-1.94-.32-2.04-1.36-1.1.05-1.16-.9-2.4-.7-.3-.5-.53-1.1-1.38-1.02.06-.4-.52-.17-.7-.35-.02-.03.05-.33 0-.34-.3-.1-.7.07-1.02 0-.52-.86-1.17-1.57-2.4-1.7-.2-.5-.53-.86-1.03-1.05.12-.8-.98-.38-1-1.03-1.3.26-1.65-.42-2.76-.34-.07-.37-.67-.23-.67-.7-.28-.17-.56-.34-1.03-.33.1-.78-.08-1.3-.7-1.37-.16-.5-.5-.87-.67-1.37H46c-.58-1.15-2-1.46-2.08-3.1-.3-.25-.77-.35-1.37-.32.13-.58-.27-.65-.7-.7-.25-.3-.36-.76-.33-1.36-1-.26-.9-1.62-2.4-1.37-.06-.28-.34-.34-.34-.7.32 0 .25-.4.33-.67-.26-.18-.55-.36-1.02-.34-.4.04-.6-.1-.68-.36-.24-1.14.7-.55 1.03-.34.1-.55-.33-.6-.35-1.03 0-.32-.42-.25-.68-.33v.7c-.6-.33-1.2-.65-1.03-1.73-1.1.3-1.07-.54-1.73-.68-1.05.25-.65-.94-1.7-.7.13-.82-.64-.73-.35-1.7-.3-.2-.63-.42-.7 0-.55.1-.6-.33-1.03-.35-.28-.96.5-.87.35-1.7-.06-.4-.63-.3-1.03-.34h-1.04c-.16-.42-.45-.7-1.04-.7.37-1.27-.85-.96-.68-2.05-.28-.05-.35-.33-.7-.33.2.28.37.56.35 1.03" class="circle" fill="' . $icon_colour . '" fill-rule="evenodd"/>';
		$circle_fallback = '_circle';
		$icon_colour = exchange_slug_to_hex('white');
	}
	$png_base = get_stylesheet_directory_uri() . '/assets/images/png/T_icon' . $circle_fallback;

	$share_buttons = ! empty( $exchange ) && $exchange instanceof Exchange;

	if ( $share_buttons ) {
		$encoded_link = urlencode( $exchange->link );
		$email_share_subject_option = get_option( 'options_email_share_subject' );
		$email_share_text_option = get_option( 'options_email_share_text' );
		$email_share_subject = $email_share_subject_option
			? rawurlencode( sprintf( $email_share_subject_option, $site_name, $exchange->title ) )
			: rawurlencode( sprintf( '%s: %s', $site_name, $exchange->title ) );
		$email_share_text = $email_share_text_option
			? rawurlencode( sprintf( $email_share_text_option, $exchange->type, $site_name, $exchange->title ) )
			: rawurlencode( sprintf( "Hi!\n\nThis %s on %s might interest you: %s\n\n", $exchange->type, $site_name, $exchange->title ) );
		$facebook_icon = '';
		$facebook_appid = get_option( 'options_facebook_app_id' );

		if ( ! empty( $facebook_appid ) ) {
			$facebook_link = 'https://facebook.com/dialog/share?app_id=' . $facebook_appid. '&display=popup&href=' . $encoded_link . '&redirect_uri=' .$encoded_url;
		} else {
			$facebook_link = 'http://www.facebook.com/sharer.php?u=' . $encoded_link;
		}
	}

	$facebook_page_url = get_option( 'options_facebook_page_url' );
	$instagram_url = get_option( 'options_instagram_url' );
	$twitter_url = get_option( 'options_twitter_url' );
	$vimeo_url = get_option( 'options_vimeo_url' );

	if ( $share_buttons ) {
		$link_titles = array(
			'twitter'  => __( 'Share this %s on Twitter', EXCHANGE_PLUGIN ),
			'facebook' => __( 'Share this %s on Facebook', EXCHANGE_PLUGIN ),
			'email'    => __( 'Share this %s in an e-mail', EXCHANGE_PLUGIN ),
			'print'    => __( 'Open a printer-friendly version of this %s', EXCHANGE_PLUGIN ),
		);
		$button_links = array(
			'twitter'  => 'https://twitter.com/intent/tweet?text=' . urlencode( sprintf( __( '%s: %s', EXCHANGE_PLUGIN ), $site_name, $exchange->title ) ) . '&url=' . $encoded_link,
			'facebook' => $facebook_link,
			'email'    => 'mailto:?subject=' . $email_share_subject . '&body=' . $email_share_text . '%0D%0A%0D%0A' . $encoded_link,
			'print'    => $exchange->link . '?exchange_display=print',
		);
	} else {
		$link_titles = array(
			'facebook'  => __( 'Connect with us on Facebook', EXCHANGE_PLUGIN ),
			'instagram' => __( 'Follow us on Instagram', EXCHANGE_PLUGIN ),
			'twitter'   => __( 'Follow us on Twitter', EXCHANGE_PLUGIN ),
			'vimeo'     => __( 'Visit our Vimeo channel', EXCHANGE_PLUGIN ),
		);
		$button_links = array(
			'facebook'  => ! empty( $facebook_page_url ) ? esc_url( $facebook_page_url ) : 'http://www.facebook.com/TandemforCulture',
			'instagram' => ! empty( $instagram_url ) ? esc_url( $instagram_url ) : 'https://www.instagram.com/TandemforCulture',
			//'twitter'   => ! empty( $twitter_url ) ? esc_url( $twitter_url ) : 'https://www.twitter.com/TandemforCulture',
			'vimeo'     =>! empty( $vimeo_url ) ? esc_url( $vimeo_url ) : 'https://vimeo.com/tandemforculture',
		);
	}

	$button_svgs = array(
		'twitter' => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 228.73989 230.40498">' . $circle . '<path d="M170.9 69.16c.65-.45 1.32-.9 2.46-.88.96.1 1.47-.22 1.64-.86 1.54-.15 2.75-.6 3.27-1.73 2.72-.32 6.74-2.06 9.1-.2 1.32 5.58-3.7 5.1-3.1 10 1.14 1.17 4.72 1.1 5.8-.1l4.14-.1c.4.73.77 1.47 1.7 1.62-.2 1.04.36 2.3.07 3.32-.02.08-.76-.06-.83 0-.26.3.3 1.4.04 1.67-.1.13-.75-.1-.83.03-.86 1.4-1.7 2.66-3.24 3.38-.9.23-.52 1.67-1.62 1.7-.72.38-1.46.76-1.62 1.7-2.56-.58-1.54 2.3-4.1 1.73-.8 2.2-3.23 2.86-4.04 5.06-1.56.1-.52 2.73-2.43 2.52-.28 1.1-1.44 1.33-1.62 2.52.24 4.83-1.28 7.97-.55 13.27-.97.16-.67 1.53-.78 2.5-.8.05-.62 1.03-.8 1.68-.8.04-.6 1.03-.8 1.67-.13.68-.8.85-.78 1.68-1.02 2.26-1.93 4.64-1.5 8.3-1.68.28-.7 3.1-2.4 3.38.38 2-1.48 1.84-.74 4.17-1.7.26-.72 3.1-2.42 3.36-.07 1.54-.47 2.78-1.58 3.35.17 2.05-1.24 2.58-1.57 4.17-1.9-.2-.87 2.4-2.43 2.54-1.27 2.28-3 4.14-4 6.7-1.92.6-2.16 2.8-4.07 3.4-1.92.6-2.16 2.8-4.08 3.4-.52 1.93-2.7 2.27-3.22 4.2-1.08.32-1.28 1.48-2.45 1.7-.73.4-1.47.77-1.63 1.7-2.06-.1-2.53 1.35-4.1 1.74-2.06-.08-2.54 1.35-4.1 1.74-1.58.4-2.05 1.83-4.1 1.74-.2 1.72-3.08.85-3.27 2.56-3.3.07-4.94 1.76-8.25 1.83-2.4.96-5.86.87-8.25 1.83l-5.8.12c-2.58-.4-5.4-.56-7.48-1.5-6.9.7-11.33-1.16-18.24-.45-.04-.8-1.02-.62-1.67-.8-.2-.9-1.65-.52-1.68-1.6-.75-.37-1.5-.7-1.7-1.64.1-2.07-1.32-2.56-2.54-3.26l-9.1.2c-2.07.16-2.6-1.26-4.2-1.58-2.04.17-2.58-1.25-4.16-1.57-2.34-1.52-7.42-.17-6.73-4.83-.03-.83-.04-1.66-.06-2.5.96.13 1.47-.2 1.64-.85 1.54-.14 2.75-.6 3.28-1.72 3.63.5 4.63-1.5 8.26-1 5.2-.96 10.5-1.83 14.84-3.62-.15-1.54-.6-2.76-1.73-3.28.2-1.9-.26-3.1-1.72-3.28.22-1.92-2.4-.87-2.53-2.43-1.56-.06-.63-2.73-2.53-2.44-.15-1.54-.6-2.75-1.73-3.27.24-1.93-.2-3.18-.9-4.13.22-1.92-.2-3.17-.92-4.12.06-2.92 2.3-3.75 2.35-6.68-.83-1.67-1.76-3.24-2.6-4.9-2.12-.05-1.24-3.22-3.37-3.26.2-1.34-.8-1.4-.88-2.47-.9-.18-.6-1.63-1.7-1.62.22-1.34-.8-1.4-.87-2.46-.9-.2-.58-1.65-1.68-1.64-.17-2.05 1.25-2.6 1.57-4.17.3-1.6 2.33-1.56 1.56-4.2.23-2.3-.45-4.2-.94-5.76-.05-.16.1-.73-.02-.83-.1-.08-.78.13-.83.02-.6-1.32.08-2.5-.9-3.3-.3-3.64-1.45-6.37-1.05-10.74-.76-2.63 1.25-2.6 1.57-4.17 1.7-.26.7-3.1 2.4-3.36-.12-3.64 1.88-5.23 4-6.7 2.97-.56 4.04.87 5.84 1.53.13 2.12 3.26 1.12 3.38 3.24 2.9 1.52 4.14 4.73 7.58 5.65.38 1.02 1.1 1.68 2.5 1.6.4.74.77 1.47 1.7 1.63.8 1.44 1.9 2.53 3.4 3.24.1 2.13 3.24 1.12 3.37 3.25 1.33-.26 1.44.75 2.5.78.22.9 1.66.52 1.7 1.62 3.3-.07 5 1.55 8.3 1.48 2.95.32 4.83 1.74 8.32 1.5 3.94-.28 3.44-4.82 6.5-5.95-.46-2.6 1.1-3.26 1.55-5 1.7-.26.7-3.1 2.4-3.36-.7-3.68 2.44-2.8 2.1-6.1 1.08-.32.96-2.4 2.14-2.6 1.34.2.28-2.12 1.34-2.2 1.08-.3 1.27-1.47 2.45-1.7.72-.38 1.45-.75 1.6-1.7 4.27.05 6.62-1.76 9.05-3.5.73-.37 1.67.53 1.83-.4 1.93-.05 3.66-1.36 5.6-1.4 1.93.23 3.43.93 5 1.55 1.5 1.05 3.45-.33 3.72 1.37 3.35.16 5.42 2.34 8.78 2.5.2 1.2 2.48.25 2.52 1.6 1.33-.25 1.44.77 2.5.8.22.88 1.66.52 1.7 1.6 1.32-.25 1.43.76 2.5.8" class="icon" fill="' . $icon_colour . '" fill-rule="evenodd"/><image src="' . $png_base . '_twitter_WEB.png" xlink:href=""></svg>',
		'facebook' => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 228.73989 230.40498">' . $circle . '<path d="M169.87 50.9c.4 1 1.08 1.7 2.07 2.08.6.55.4 1.9 1.38 2.07-.3 1.44 1.5 2.57 1.73 3.5.05 1.1-1.37 1.9-.34 2.03 1.26 5.6.54 8.68 1.4 12.43v8.3c.26 2.5-.63 4.6-.14 6.9-.75 2 .88 4.92.13 6.92-.35 3.6.73 8.58-.7 11.06.76 2.92.8 6.57.7 10.36-.42 2.94-.5 5.95-.7 8.98-.1 1.64.2 3.1 0 4.84-.13 1.1.32 2.03.26 3.34-.26 5.72-1.2 12.2-.95 18.08.04.84-.2 1.95 0 2.76.05.18.66.06.7.7.18 3.53-.14 9.84 0 14.5-.1 2 .37 4.53-.7 5.53-1.26 1.02-2.66 1.18-4.83 1.38-1.83.17-3.7-.13-5.53 0-2.22-.15-1.66.36-4.26-.18-.1-.8-2.53.3-3.34.18-1.12-.2-.36-.22-1.24-.18-3.75-.17-7.56-.24-11.9.18-3.88.2-6.56-.8-8.97-2.07-.62-2.03-.62-2.13 0-4.15.8-.1.58-1.26.7-2.07v-2.76c-.55-4.22-.8-8.07-.7-12.44.1-4.03 1.22-8.16.7-12.44-.06-2.94-1.16-4.83-.7-8.3.5-2.1-.7-2.5-.7-4.13.37-1.04.43-2.43.8-3.45 1.37 0 1.47-1.2 3.36-.7h3.44c2.34-.2 3.97-1.1 6.9-.7 1.37-2.33 2-5.37 2.08-8.98-.98-2.24-3.35-3.1-6.9-2.77h-2.77c-.8.12-1.23-.15-1.38-.7-2.2.6-2.14-1.07-3.46-1.37-.2-1.62-1.08-2.6-.68-4.84.8-.82-.2-1.47-.3-3.17-.53-4 .33-7.53 1.54-9.78 2.3-1.14 6-1.94 9.82-1.56.17-.76 1.37-.48 1.38-1.4 1.1.2 1.2-.65 2.07-.7.56-.35 1.12-.7 2.07-.68-.1-.8.16-1.23.7-1.38.54-2.85-1.07-3.55-.7-6.22-.4-.38-.9-.38-1.38-.7-.14-.08-.57.13-.7 0-.04-.05.08-.66 0-.68-2.6-.73-6.96.4-9.66.7-3.97.17-8.8-.53-11.75.68-1.23-.1-1.44.85-2.75.7-.17.74-1.38.46-1.38 1.37-1.62.2-1.55 2.13-2.77 2.76v9.67c-.27 2.5-.9 4.63-1.38 6.9-.22 2.55.6 6.13-.7 7.6-1 1.08-3.53.62-5.52.7-1 1.07-3.53.6-5.52.7-.12 1.95-1.27 2.87-1.4 4.83.02 1.24-.72 1.45-.68 2.76.04 1.1.48 1.2.7 2.08.4.78.8 1.75 2.07 2.07.43.1.96-.13 1.38 0 .08.02.23.57.7.7 1.07.26 2.34-.22 3.44 0 .1.8 1.25.57 2.07.68.17.75 1.37.47 1.38 1.38 1.4.2 1.35 1.87 2.76 2.07 1.05 3.72.64 9.16.7 14.5-.6 1.97-.48 4.38-.7 6.92-.2 2.55-.07 4.96-.68 6.9.77 2.93.8 6.6.7 10.38-.4 2.24.46 3.2.68 4.83.18 2.02-1.56 2.12-1.38 4.15-1.3.76-3.26.88-4.83 1.38-1.13-.2-1.2.65-2.1.7-.97-.07-2.5-1.6-2.6-.8-3.32-.83-6.8.54-10.5.1-3.6-.37-4.98.46-8.15.5-2.3 0-4.1-.3-6.4-.3-.63-.53-2.22.44-3.43.5-1.1-.07-2.63.32-2.76-.7-2.85.54-3.06-.47-5.73-.1-.55-.23.05.13-.62 0-.43-.08-1.08.72-1.5.6-1.02-.23-1.35.08-2.15-.3-3.46.47-7.75-.55-10.7-.6-2.73-.26-4.97.9-6.7-1.23-.3-1.3-.4-2.3-.3-4.03.8-.82-.53-3.7-.62-5.4 0-.04.5-1.08.6-2.78.5-2.12-.32-2.96-.3-4.6 1.4-6.65-.52-15.87 1.08-22.33-.5-7.42 1.15-12.7.7-20.04-.7-5.5-1.3-13.27 0-18.66V82.7c.4-3.3 1-6.4.7-10.38.8-.1.58-1.26.68-2.07V67.5c.75-.2.47-1.4 1.4-1.4 0-.7-1.2-1.35-1.2-2.04.54-4.46.16-6.83.5-11.08 1.44-.4 1.97-1.72 4.14-1.4h2.77c.97.07 1.94.13 2.06-.68H75.2c2.5-.75 6.28 1.62 8.5.63 4.7-.32 7.7-1.08 11 0 5.8-.4 10.8-.08 19.9-.63.9.96 3 .7 4.83.7 1.63-.02 2.04 1.18 4.15.68 3.75-.52 6.9-.65 10.53-1.06 3.9-.27 7.23 1.3 10.4.3.92 0 0 .32.9.32.82.1 2.3.23 2.46-.3 2.92.8 7.7-.25 12.22-.32 4.77-.12 5.37-1.12 9.8-.32" class="icon" fill="' . $icon_colour . '" fill-rule="evenodd"/><image src="' . $png_base . '_facebook_WEB.png" xlink:href=""></svg>',
		'email' => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 228.73989 230.40498">' . $circle . '<g class="icon" fill="' . $icon_colour . '"><path d="M187.6 63.73c2.72 4.23-1.92 7.5-3.75 9.8-1.42.18-3.67 5.1-4.37 6.03-2.14-.52-.3-.52-2.35.92-2.06.96-1.64 3.75-3.7 4.7-.17.26.26.34.03.53-.13.1-.58-.1-.7 0-.1.13.13.6 0 .7-.08.1-.63-.1-.7 0-.13.26.23 1.22 0 1.4-.05.05-.66-.07-.68 0-.15.4.1.96 0 1.4-1.88.2-1.94 2-3.47 2.55-.78 3.38-3.43 3.25-4.9 5.94-.92.24-1.27 1.87-2.27 2.04-.8 1.23-.95 2.2-1.84 2.25-1.65 1.22-.84 2.84-2.88 2.66-.17.75-.62 1-.63 1.9-1.13-.2-1.36 1.54-2.25 1.58-1.44.4-2.46 2.86-3.7 3.48-1.2 1.23-3.8 3.6-4.9 4.72-1.44 2.5-4.5 3.84-5.94 6.35-2.76 1.16-2.5 4.44-5.45 5.4-.25.93-1.23 1.1-1.4 2.1-.3.62-.6 1.24-1.38 1.4-.37.93-1.6.72-1.8 2.36-2.2-.33-2.13 2.97-3.77 3.2-.3.6-.6 1.23-1.4 1.38-.16.76-1.8.24-1.8 1.16-4.3 1.84-8.13 2.04-11.4.23-2.13-.18-3.12-1.5-4.86-2.1-.9-1.42-1.1-3.5-3.47-3.46-.25-.9-1.23-1.1-1.4-2.1-.67 0-.53-.84-.7-1.38H98.4c-.3-.86-.9-1.43-2.1-1.4-.3-.62-.6-1.24-1.4-1.4-1.3-1.7-2.16-3.84-3.46-5.55-.76-.17-.47-1.38-1.4-1.4-.12-.55-.7-.68-.7-1.38-1-.4-1.68-1.08-2.07-2.08-2.05-.98-2.82-3.23-4.87-4.2-.1-2.67-2.82-2.73-3.47-4.85-3.43-2.37-5.62-5.97-9.04-8.34-.02-3-3.47-2.55-3.5-5.55-1.67-1.1-3.06-2.5-4.16-4.17-1.4-.2-1.36-1.9-2.78-2.1.22-1.6-2-.76-2.08-2.07-1.03-.36-.52-.64-1.55-1-.4-1-1.05-2.07-2.05-2.46-.6-.56-1.68-1.9-2.66-2.1-.37-.56-.72-1.12-.7-2.08-.85-.3-1.42-.9-1.38-2.1-.62-.3-1.25-.6-1.4-1.38-1.45-.63-4.75-3.54-4.72-5.66-.96-.9-1.22-1.64-1.23-3.48 1.22-.63 4.08-2.05 5.52-2.46 2.2.34 3.58-.77 6-.2.1.8.35-.32 1.17-.2.98-.07 2.75-.62 2.86.2.9-.96 2.66-.4 4.5-.42 5.26-.54 10.57.6 15.17-.6 10.9 0 21.7-1.08 32.58-1.08 2.22-.57 5.35.8 7.18-.16 15.6.62 31.83-.72 47.13.2 4.62 0 7.13-.12 11.9 0 2.1.22 4.5-.4 5.4.66 2.45-.13 4.62 1.2 6.5 1.65M32.5 80.27c1.2 1 3.97 3.25 4.96 5.56 1.02.37.36 1.6 1.38 1.98.54.6.88.57 1.04 1.5 1.88.66 2.9 2.1 4.8 2.76.66 1.75 2.68 2.3 3.35 4.04 1.74.58 1.7 2.75 2.67 4.02 1 .4 1.67 1.07 2.03 2.03.85.3 1.4.88 1.33 2 1.43.87 2.56 2 3.4 3.4 1.8.72 2.25 2.66 4.06 3.4-.2 2.3 2.3 2.22 2.67 4 .67.05.5.83.65 1.35.6-.1.65.27.68.67.9.26 1.05 1.2 2.04 1.37.6.55.36 1.82 1.34 2 .6.56.37 1.83 1.34 2.02-.18.24.2 1.15-.04 1.32-.08.06-.65-.1-.7-.02-.12.23.18 1.16-.03 1.3-.1.1-.6-.1-.7 0-.3.36-.4.93-.72 1.3-.2.2-.97-.03-.72.63-1.85.62-2.4 2.52-4.26 3.15-.1 1.24-2.3.4-2.14 1.9-.92.22-1.12 1.14-2.12 1.27-1.75.5-2.84 1.77-4.72 3.08-.42.25-1.06-.4-.92.05.27.9-.46.96-.55 1.07-.1.12-.03-.54-.15-.43-.08.05-.66-.1-.7-.03-.16.32.2 1.02-.04 1.3-.07.1-.58-.1-.68 0-.12.1.1.54-.02.65-.12.1-.58-.13-.7-.02-.1.1.08.52 0 .65-.3.44-.6.72-.75 1.3-1.95 1.2-3.6 2.7-5 4.46-1.23.57-2.18 1.42-2.84 2.56-.93.63-2.6.55-2.83 1.9-2.14 1-2.7 2.02-6.22 1.65-1.9.44-.57-1.36-2.47-1.1-.58-.54-.48-1.53-1.46-1.73-.32-2.06.32-3.8-.46-5.44.83-11.06-1.73-23.85-.7-35.77.12-1.52-.23-2.8.8-3.92.03-2.17-1.1-3.3-.53-5.93-.45-2.02.6-1 .16-3.02-.04-.93-.97-2.05-.15-2.14-.1-.76.13-2.17.68-2.3-1.2-2.12.5-3.1.2-6.78 1.23-.56.9-3.06 2.54-3.22.23 0 1 .22 1.22.23M200.6 79.16c.1.1.4-.6.5.33.06.4.07.82.12 1.3.1 1.1.13 2.77.2 3.94.13 1.97-.2 3.73-.25 4.24-.07.58.03 1.8.15 1.9.06.04-.35 1.35-.33 1.4.25.8-.15 3.74.04 4.54.14.6.3.6.44 1.5.13.85-.52-.07-.42.77.83 2.7-.22 5.83-.3 9.34 1.07 4.63-.02 10.1.98 14.8.45 4.65-.3 8.8-.2 12.8.08 3.1-.08 7.12.53 8.73-.2 1.5-1.05 1.05-.6 3.13-.65.28-.93 1.37-1.07 2.08-.84-.1-2 .15-2.15.65-.72-.34-.03.67-1.95-.13-1.5-.36-2.56-1.3-3.84-1.85-.95-.22-1.96-1.52-3-1.67-.18-.7-1.4-.38-1.4-1.23-.17-.54-2.62-2.05-4.36-2.86-1.2-1.73-2.33-2.72-4.57-3.5-.5-1.48-2.12-1.2-2.62-2.67-.7 0-1.2-.62-1.38-1.1-.6.1-.68-.26-.73-.65-.65-.27-1.9-.13-2.05-.85-2.2-.58-1.7-3.5-4.48-3.56 0-.43 0 .26-.02-.17-.64-.27-.9-.4-1.07-1.12-.6-.54-1.73-.78-1.93-1.68-.95-.2-1.5-1.64-2.54-1.78-.57-.55-.62-.9-.82-1.8 0-.2-.5.07-.65-.42-.08-.23-.44-.44-.44-.83-.1-1.6-.33.2-.02-.4.07-.14.03-.66.42-1.68.06-.16.96-.33 1.07-.44.12-.1.73-1.35.85-1.46.48-.43-.72-.17.22-.2.17-.7 1.5-.63 1.5-1.48.57-.13.55-1.67 1.27-1.68.2-1.3.87-.57 1.07-1.88 2.35-1.12 3.55-4.33 5.9-5.46 1.36-1.78 3.02-3.3 5-4.54.35-2.02 1.92-2.5 2.8-4.07 1.5-.65 3.27-3.04 4.63-4.6 1.47-.2 1.06-2.13 2.53-2.34.07-1.2 2.38-.47 2.14-1.94.88-.96 3.26-5.6 4.23-5.8.17-.4 1-2.32 2.42-3.9.55-.62.86-1.26 1.36-1.76.87-.86 2.63-.18 2.8 0"/><path d="M148.73 135.1c1.75.24 3.42 2.16 3.94 3.53 1.33.63 2.34 1.56 3.02 2.78 1.32.64 2.32 1.57 3 2.8.67.3 1.4.17 1.57.94.88-.1 1.28.6 1.44 1.14 1.34.63 3 1.12 3.68 2.35 1.77.2 2.44 2.46 3.1 2.52 1.3 2.28 4.92 2.78 6.22 5.06 1.35-.08.65 1.36 2.07 1.2.2.76 2.36.55 2.37 1.48.6.36.36.64 1.4.6.2.76 1.5.48 1.5 1.4 1.76.47 2.02 2.3 3.77 2.78-.2 1.12.72 1.2.77 2.1.46.6.9 1.23 0 1.37-.1 1.77-1.1 2.7-3.02 2.8-.12.8-.64-.1-1.52 0-.12.82-1.56.3-2.44.42-4.6-.53-5.32.62-9.78.2-3.8-.66-9.6.04-13.38-.63H144.4c-2.77.46-5.1-.02-7.66.63-3.32 0-7.63.2-13.1.2-3.24-.7-7.53.22-10.65-.6-9.1.8-15.72.95-24.88.6-2.96.52-5.6-.42-8.43.2-3.16.34-6.22.34-9.12.35-2.78 0-3.96-.35-6.65-.13-3.16.36-5.43.38-8 .2-3-.23-3.84.48-7.2-.07-2.12.58-2.3-.42-4.12-.13-.98-.25-4.53-1.13-3.54-1.64-1.2-1.33-1.2-2.9.22-4.3.15-.57 2.2-.87 2.2-1.57-.13-.8.16-1.24.74-1.4.8-2.04 3.4-2.4 5.28-3.47 1.18-1.7 2.7-3.08 4.5-4.18.44-1 1.2-1.7 2.27-2.1.6-.58 2.07-.4 2.26-1.37 2.06.5 1.52-1.38 3.02-1.4-.52-1.86 1.55-1.34 2.26-2.08.5-.93 1.62-1.3 3.02-1.4-.23-1.6 2.17-.76 2.26-2.08 1.08-.4 1.84-1.1 2.26-2.1 2.05.52 1.5-1.37 3-1.38.83-1.8 1.9-3.34 3.78-4.17.18-.76 1.5-.47 1.5-1.4.37.22 2.35-1.72 3.84-1.48.83.14 1.03 2.02 1.43 2.18.4.17 1.1-.2 1.5 0 .1.06-.1.6 0 .7.12.12.63-.12.75 0 .13.12-.12.58 0 .7.13.1.63-.12.76 0 .5.46.54 1.36 1.5 1.38.08 1.8 2.95 1 3.02 2.78.67.32 1.35.62 1.5 1.4.9-.1 1.35.16 1.52.7 1.12.82 2 1.44 3 2.78 1.34.63 2.34 1.56 3.02 2.78 1.33.63 2.33 1.56 3 2.78 1.9-.1 2.35 1.1 3.78 1.4.27.17 1.3-.24 1.5 0 .05.04-.05.68 0 .7 2.17.42 5.07-.34 7.54 0 1.53.18 2.05-.36 3-.7.16-.06.66.1.76 0 .08-.08-.16-.07-.06-.1.42-.17 1.13-.46 1.57-.6.3-.1.33-.2 1.1-.22.24 0 1-.33 1.16-.48.07-.05.78.08.84.06.96-.2 1.48-1.07 2.44-1.22.33-1.32 1.24-.22 1.25-.92.6-.14.66-1.75 1.42-1.75.42-1 1.8-1.03 2.88-1.42.1-1.3 1.56-1.02 1.72-1.7 1.1-.38 1.84-1.07 2.26-2.07 1.84-1.1 3.34-2.48 4.53-4.17 1.5-.25 2.88-3.93 4.38-3.93 1.75.22 1.35 1 2.23.4"/></g><image src="' . $png_base . '_email_WEB.png" xlink:href=""></svg>',
		'print' => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 228.7567 230.41747">' . $circle . '<g class="icon" fill="' . $icon_colour . '"><path d="M134.6 92.1c.58.2 3.7.2 4.1-.2.3.1 4.63-.23 5.1-.4 1.6-.24 2.54-2.02 4.75-1.6 0-.97 1.14-.6 1.3-1.42.98-.17-.66-1.53.23-1.8.55-5.58.15-6.34-.87-10.93-.7-3.14-1.1-9.1-2.02-13.3.46-3.73-.63-5.77-.68-8.94-.78-.74-.22-1.74-.68-2.97-.03-.08-.6.07-.68 0-.2-.18.12-1.22 0-1.5-.04-.08-.6.08-.68 0-.22-.2.17-1.2 0-1.48-.55-3.87-.56-8.32-2.04-11.17-2.18-1.1-3.8-2.8-7.5-2.23-3.55-.17-5-.73-7.75 0 .04-1.56-1.85-.4-2.42-.44-.7-.03-1.82-.2-2.1-.3-1.13-.46-2.13-.46-3.73-.8h-2.28c-1.02.12-3.3-.2-3.5.8-1.7-.62-3.44.4-6.5-.8-1.6.72-2.86.7-4.96.9-1.33 1-2.45-.35-4 .43-1.27-.1-1.73 1.56-2.17.56-1.2-.68-3.1-.94-5.45-.35 0 .98-1.84.07-2 .88-.1.16.02-.28-.1-.13-.28.36-1.12.3-1.36.74-.38.7.33 2.24-.68 2.22-.1.88.12 2.12-.68 2.24-.1.87.12 2.1-.68 2.23v2.23c-.15.57-.02 1.46-.68 1.5.56.85-.03 1.5-.25 3.2-1.12.03.54 2.57-.44 2.74.3 1.8-1.24 1.62-.68 3.73.15 1.4-.8 2.7-.72 4.05.02.75-.5-.2-.63.4-.15.6 1.02 1.77.36 1.8 0 2.47-1.04 4.67-1.04 7.15-1.27-.22.45 3.46-.7 3.46.5 2.27-.3 2.6-.28 4.37-.4 3.92-.58 6.75-.4 10.03.2.58 1.63 2.93 3.22 3.43.92.23.88 1.3 2.3 1 0 1.22 2 .2 2.64.78 5.04-.54 7.87.85 12.82.4 2.17.1 4.7.8 7.15.62 1.13 0 1.93.05 3.07.05.74.1 2.24-.18 2.8.1 1.57-.46 3.62-.08 4.02-.2.36 0 17.47-.98 17.46-1.1"/><path d="M183.7 139.24c1.5-12.9-.7-27.25.57-40.37-.9-5.54 0-14.05-1.4-16.57-3.72-1.32-9.5-2.02-13.32-1.14-2.4.32-3.86.15-6.53.2-.18 1.07-1.92.28-2.18 1.26-1.72-.23-.3 4.4-1.72 4.5.3 1.73.48 1.56.48 2.85 0 .76-.6 1.76-.47 2.36.22.94-.17 2.03 0 2.98.03 3.27-1.86 4.6-2.98 6.7-4.06-.32-6.17 1.84-10.48 1.26-1.98 0-3.72.43-5.7.43-.88-.13-1.32-.23-1.54-.56.22.66-1.64.9-1.98.88-.87 0-18.27.7-23.1.8.3.58-2.48-.28-2.47-.25-.22.23-7.7-.87-9.33 0-3.57.16-6.06.1-9.44.45-2.7 0-3.2-.83-5.93-.83-.75 0-1.6.76-2.2.62-.57-.17-3 .15-3.02-.57-.74 0-1.14-.1-1.9-.1 0-1-1.76.23-1.94-.58-2.84-.4-5.45-1.7-6.57-3.8.3-1.27-2.34-1.82-1.24-2.14V85.76c-1.08-.43-.6-2.05-1-3.12-1-.76-2.75-.73-3.73-1.5H54.9c-1.8-.3-1.63 1.37-3.74.76-1.83-.1-3.58-.12-4.46.74-1.87-.12-2.32 1.17-3.74 1.5-1.1.64-2.36 1.1-2.23 2.97-.53.68-.75 2 0 3v4.45c-1.02 2.55-.74 6.02-.75 8.93.5 3.73-.7 5.76-.74 8.94-.58 16.46 1 30.77.74 46.9-.5 2.75-.34 5.73-.38 8.9-.02 1.77 2.4 1.8 1.87 4.08 1.44.3 1.25.3 1.56.3.88.12 1.02 1.34 1.57 0 1.7.22 2.65 1.44 2.83.14.18.05.28.1.34.16h.13c.1-.07.1-.04.03.03.2.1.44.28.6.2.1-.04 1.48.53 1.55.44.2-.24 1.93.4 2.2.22 4.4.2 10.95-.55 14.82-.9.22-1.5.1-5.35.3-6.87.26-1.74.4-5.74 1.88-6.25.7-3.03 1.67-3.05 4.07-4.38 3-1.97 7.15-2.74 11.3-3.54 9.68.48 17.6-.13 26.67-.24 3.76.45 7.22.86 11.32.98 5.82-.13 8.97.5 11.95.55 3.26-.2 4.84 0 8.76.44.12.85 1.73.92 2.8.85.94.05-.93 1.1.27.9 0 .98 1.1-.45 1.28.35 1.06.2 1.56.65 2.2 1.25.03 1.03 1.64.65 1.25 1.25-.13 1.12 2.57 4.15 1.56 4.38.18 2.4 1.57 4.65 1.57 7.5.84.16.3 2.15.63 2.8-.53 2.04-.3-.53-.3.95 1.56.25 1.88.18 4.8.18.16-.57 1.84.08 2.7.2.76 0 .9-.6 1.5-.74 2.28.54 2.5-.43 4.8.1 2.72 0 6.9-.97 9.63-.97-.12 1.6 1.1-.4 2.2 0 1.72.23 1.63-.64 2.5-1.26.3-2.18 1.17-1.32.93-4.05-.04-2.45-.58-3.38.05-6.5 1.4-6.2.8-15.25 0-21.6"/><path d="M77.35 183.56c-.87-1.25-.87-11.25.43-13.9 1.44-.92 2.6-2.16 3.46-3.72.8.12 1.23-.16 1.4-.74.8.12 1.22-.17 1.38-.75h4.16c.58-.9 2.47-.35 3.48-.75 1.45.3 2.1.1 3.04-.14 2.66.63 5.3.37 8.76.15 3.77-.56 5.63.9 9.03.75 9.36-.45 17.5-.7 26.4.74.06 1.9 2.7 1.05 2.77 2.96 1.42.23 1.36 2.03 2.78 2.25.46 2.74.74 5.67 1.4 8.2.07 1.33-.86 1.57-.7 2.98.3 2.8-1.48 3.4-2.8 4.46.04 1.28-.5 1.93-1.38 2.24.04 1.27-.5 1.93-1.38 2.23-.6-.12-.67.3-.7.76-4.13.54-7.5 1.9-12.5 1.5-.56.06-.56.96-1.25.87-.55-.08-1.9-.6-4.08 0-2.23-.17-3.2 0-5.8-.14-3-.24-5.53.75-8.2.13-6.47 0-13.1-1.63-19.57-1.63-.1-.87-1.26-.63-2.07-.74-.02-.73-.85-.58-1.4-.75-1.32-.3-1.74-1.6-3.47-1.5-.2-1.5-1.85-1.46-2.77-2.2-.23-1.53-.24-1.7-.45-3.24" fill-rule="evenodd"/></g><image src="' . $png_base . '_print_WEB.png" xlink:href=""></svg>',
		'vimeo' => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 228.73989 230.40498">' . $circle . '<path d="M169.783 56.995c.21 1.603 2.36 1.265 2.038 3.398 1.344.47 1.813 1.814 2.04 3.4.95 2.672 2.158 5.09 3.398 7.475-.09 1.675-.103 3.275.68 4.077V86.22c-.555 2.162-.433 5.003-1.36 6.795.418 3.138-1.525 3.912-1.358 6.797-1.846-.487.486 3.205-1.36 2.718.563 1.922-.96 1.76-.68 3.398-.51 2.21-1.23 4.207-2.04 6.117-.892 1.825-1.822 3.613-2.717 5.438-1.035 1.682-1.394 4.042-3.4 4.756.497 1.854-1.35 1.368-1.358 2.718-1.566-.208-.755 1.964-2.037 2.04-.634 1.86-2.085 2.897-2.72 4.757-.353 1.005-1.005 1.713-1.36 2.718-1.567-.21-.754 1.964-2.038 2.04-.354 1.005-1.005 1.71-1.36 2.717-1.566-.207-.754 1.963-2.04 2.04-.38.978-1.057 1.658-2.037 2.04.496 1.853-1.35 1.368-1.36 2.718-.64 2.075-3.305 2.13-3.397 4.756-1.647 1.073-3.006 2.433-4.078 4.078-2.145.573-1.933 3.505-4.078 4.078-2.087 3.122-5.387 5.033-7.476 8.155-1.854-.495-1.368 1.35-2.72 1.36-.238.892-1.195 1.068-1.358 2.04-2.398.093-3.038 1.943-5.436 2.038-.297.835-.87 1.396-2.04 1.36-.296.835-.87 1.395-2.04 1.357-3.136 1.395-5.712 3.348-9.512 4.078-3.533.36-5.448-.898-8.157-1.36-2.524-.42-4.27-1.618-6.795-2.038-.01-1.35-1.854-.863-1.36-2.717-.66-.02-.526-.833-.68-1.36-.79.11-1.207-.15-1.357-.68-.382-.98-1.062-1.658-2.04-2.038.03-1.163-.504-1.76-1.36-2.04.497-1.855-1.35-1.368-1.36-2.718-.584-.548-.403-1.862-1.358-2.04-.58-1.912-2.195-2.787-2.04-5.435-.66-.02-.525-.833-.68-1.36-.127-.552-.68-.678-.677-1.36.086-1.22-.832-1.433-.68-2.718-.73-1.762-1.652-3.334-1.36-6.116-1.845.485.487-3.205-1.36-2.72.288-1.42-.464-1.8-.68-2.718-.373-2.116-.554-4.428-1.358-6.117-.056-2.434-1.056-3.925-1.36-6.116.563-1.92-.957-1.76-.68-3.398-.584-.55-.402-1.862-1.36-2.04-.056-2.435-1.055-3.927-1.357-6.117-.572-.79-.897-1.82-.68-3.4-.98-.153-.237-2.026-1.36-2.036-.32-4.663-1.652-8.317-2.718-12.234-.764-1.73-1.67-3.314-2.72-4.758-.1-1.063-1.354-1.46-2.037-2.038-.197-.167-.497-1.277-.68-1.36-.377-.17-.964.13-1.36 0-1.587.225-2.807.817-4.078 1.36-.2 1.386-1.836 1.332-2.037 2.717-1.202.613-1.984 1.64-3.4 2.04-.098 1.486-1.71 1.46-3.397 1.36-2.587.32-4.24-.29-4.757-2.04-1.964-.3-3.097-1.432-3.397-3.4-.212-2.077.43-3.297 1.36-4.755.087-.138-.112-.568 0-.68.083-.086.625.098.678 0 .524-.956.747-1.738 1.36-2.72.234-.373.637.104.68-.68.03-.555.76-.672.68-1.358 2.897-1.86 4.577-4.937 7.475-6.797 1.86-2.897 4.936-4.578 6.795-7.476.98-.38 1.658-1.06 2.04-2.04 1.163.03 1.76-.503 2.038-1.36.893-.238 1.068-1.195 2.038-1.358.55-.584 1.863-.404 2.04-1.36.79.112 1.21-.15 1.36-.68 2.19.15 2.875-1.2 5.436-.68.112-.794 1.24-.572 2.04-.678 1.1.19 1.17-.642 2.04-.68 2.955-.894 6.977-.725 10.193-1.36 2.31.638 4.98.91 7.475 1.36.186 1.4 2.53.64 2.718 2.04 1.006.353 1.715 1.005 2.718 1.36.586.546.405 1.86 1.36 2.036.586.55.405 1.863 1.36 2.04-.446 2.487 1.47 2.608 1.36 4.758.604 1.66 1.585 2.946 1.36 5.437.53 1.51 1.428 2.65 1.36 4.757.67 1.596 1.19 3.338 1.358 5.437.922.21.565 1.702.68 2.718.796.11.573 1.24.68 2.04.98 3.096.613 7.54 1.357 10.872.225 1.59.818 2.81 1.36 4.078-.19 1.1.644 1.17.68 2.04-.06.964-.112 1.924.68 2.04-.49 4.792 1.528 7.08 1.36 11.55-.524 2.564.83 3.25.678 5.44.528.604.732 1.534.68 2.717.605.302 1.216.597 1.36 1.36.903-.683 2.528-.643 2.718-2.038 1.568.207.756-1.965 2.04-2.04-.506-2.092 1.866-1.307 1.36-3.398 1.566.207.755-1.965 2.038-2.04 1.085-1.86 2.538-3.353 3.398-5.437.302-.605.598-1.215 1.36-1.36-.11-.79.15-1.21.68-1.36.093-1.264.445-2.27 1.358-2.718.406-5.937 3.025-9.66 2.72-16.31-1.02-1.926-.76-5.13-2.04-6.797-1.51-.98-3.278-1.706-6.118-1.36h-4.076c-.892-.24-1.07-1.195-2.04-1.36-.06-1.126.08-2.27 0-3.396.006.07-.656-.247-.68-.68-.027-.542.81-.684.68-1.36.65-1.388 1.39-2.69 2.04-4.077.66-.018.528-.832.68-1.36.578.125.64-.265.678-.678.662-.02.528-.833.68-1.36.578.125.64-.265.68-.68.65-1.388 1.388-2.69 2.038-4.078.98-.38 1.66-1.06 2.04-2.04 1.005-.352 1.713-1.005 2.718-1.36.716-2.002 3.076-2.36 4.757-3.397-.206-1.566 1.965-.755 2.04-2.04 1.006-.35 1.714-1.004 2.72-1.36 1.824-.89 3.613-1.823 5.436-2.716 1.422.288 1.8-.465 2.72-.68h6.115c3.206-.033 5.15 1.193 8.158 1.36 3.53-.36 5.446.896 8.155 1.358" class="icon" fill="' . $icon_colour . '" fill-rule="evenodd"/><image src="' . $png_base . '_vimeo_WEB.png" xlink:href=""></svg>',
		'instagram' => '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 228.73989 230.40498">' . $circle . '<path d="M152.6 113.46c0 4.36-.62 7.2-.62 11.56-.94 0-.3 3.03-1.06 3.23.03 1.13.93 1.75.56 2.4.38.72-.67.7-.7.83-.17.43.2 1.24 0 1.63-.08.14-.62-.1-.72 0-.12.15.12.7 0 .83-.1.14-.57-.12-.7 0-.24.22.17 1.34 0 1.64-1.65.55-1.9 2.7-3.54 3.26-.48 1.9-2.35 2.2-2.83 4.1-2.08.04-2.63 1.86-3.54 3.25-1.44.8-2.8 1.67-4.24 2.46-.97-.04-1.55.38-2.12.8-6.98.94-14.28 1.48-21.2 2.47-3.36-.47-6.52-1.18-10.6-.8-1.33-.67-2.6-1.38-4.25-1.65-.12-.95-1.1-.88-2.12-.8-.12-.97-1.1-.9-2.12-.83-1.47-.47-2-2.03-4.23-1.64 0-1.08-1.24-.74-1.4-1.63-1.35.18-1.57-.92-2.84-.8-.98-2.43-3.26-3.32-4.24-5.73-.4-1.18-1.1-2-2.13-2.45.1-2.04.12-1.8-.18-3.34.02-1.13.05-2.6-.32-3.26.52-3.87-.72-5.3-.63-8.66 0-1.63 1.4-5.3 0-4.7-.75-.75-.9-4.17-2.8-3.6-1.37-.3-4.38 1.17-3.86 3.96v20.41c.5 3.03-1.2 3.5-.7 6.54.04 3.48 1.17 5.7.7 9.8-.52 2.5 1.22 2.4.7 4.9-.52 2.52 1.94 1.57 1.42 4.1 1.2-.05 1.8.62 2.12 1.62 1.63-.26 2.7.13 3.53.82 2.83.27 3.92-1.46 7.07-.82 2.48.4 4.6 1.22 7.77.82 2.34.58 4.53 1.3 7.08 1.63 3.65-.03 7.16-.23 9.2.8 3.4-1.5 8.93-.54 13.42-.8 3-1.17 6.68-1.54 9.9-2.46 2.58.54 2.55 1.04 4.8 1.18 2.65.62 3.33-1.4 5.6-1.2 3.64.16 5.87-.27 9.38.02.02-1.08 1.24-.74 1.42-1.63 1-.2 1.2-1.34 2.12-1.62.15-.92.78-1.28 1.4-1.64v-4.08c1.1-1.2.63-4.2.72-6.54 1.1-1.2.62-4.18.7-6.54-.38-4.46.27-8.18-.1-12.65 0-3-.2-6.88-.2-9.87.53-1.93.28-5.18-1.1-6.9-.9-.03-1-1.04-2.13-.8-.16 1.16-2.15 1.33-2.4 2.4m-56.98 14.86c1.83.26 1.76 2.42 3.58 2.7.1 2.3 3.5 1.27 3.6 3.57 1.33.14 3.3-.33 3.57.9 5.1.6 7.45-1.53 12.55-.9-1.64.96 11.26-3.7 9.86-3.6 1.58-.8 2.6-2.16 4.48-2.68.8-1.58 2-2.78 3.58-3.6.14-1.04-.15-2.53.9-2.67.14-1.06-.16-2.55.9-2.7.35-4.24-1.6-6.16-.9-10.75-.7-.2-1.05-.75-.9-1.8 0-.9-.72-1.06-.9-1.78-.38-1.7-1.93-2.25-1.8-4.48-.82-.13-1.14-.57-1.78-.9-.18-.1-.76.14-.9 0-.1-.1.12-.85 0-.9-.47-.2-1.34.27-1.8 0-.35-.2-.5-1.5-.88-1.8-.38-.27-1.36.2-1.8 0-.24-.1.02-1.4-.9-.88-.24-1.85-3.33-.85-3.58-2.7-2.62.24-2.75-2.02-5.37-1.78-4.03-.44-6.72.45-9.86.9-.24 1.25-1.97 1-2.7 1.78-.04.55-.04.07-.8-.1-.2.7-1.24 1.3-2.1 1.33-1.4 1.9-3.5 1.14-4.5 3.42-1.27.24-2.4 6.4-3.18 7.14-1.2.6-1.2 2.02-1.33 3.7-1.26.23-.55 2.44-1.32 3.16 0 .9 1.75.33 1.58 1.06-.2.7-.02 1.77-.9 1.8.84 4.53 2.5 8.24 3.6 12.54M150.36 75c-.9-.6-5.35 1.74-6.4 3.84-.96 1.9-2.25 7.37 2.5 11.58 1.9 1.7 7.46 2.33 8.7 1.23 4.23 1.13 3.27-4.47 5.45-4.48-.22-3.4.54-9.1-1.28-10.9-1.1 0-8.33-4.48-8.97-1.28m18.07-19.35c.44 1.9 2.95 1.75 2.83 4.24 1 .15.24 2.1 1.4 2.1-.05 1-.1 2 .72 2.13 1 3.24 1.83 6.63 2.1 10.6.6 3.64.93 7.56.7 12 .9.17.94 2.12 0 2.13.4.57.75 1.15.72 2.12v6.37c.03 2.32 1.2 3.5.7 6.36-2.52.6 1.83 3.65-.7 4.25v6.36c-1 .95-1 4 0 4.96.38 4.62-.44 8.04-.7 12 .82 3 .77 7.42.7 12.03.46 4.24-.33 7.86-.38 12.63.47 4.7.16 5.52.38 9.97-.96.22-.6 1.77-.7 2.83-.83.12-.6 1.3-.7 2.12-.25.55-.6.73-.72 1.42-.08.45.1.96 0 1.4-.25 1.04-4.13 2.06-4.5 2.88-1.03.4.7-.7.3.32-.57.6-2.3-.37-2.5.62-.57.6-.12-.38-.3.62-1.8 1.9-1.76-.55-1.88.93-5.04 1.1-10.2 3.36-16.57 3.13-5.38-.75-12.28.72-17.66-.02-2.6.03-8.24.4-8.9.33 0 0-1.22-.3-1.72-.34-.7-.04-1.42-.03-2.12 0-1.23.05-1.54.55-2.82.7-3.02.38-6.52-.26-10.6 0-5 .3-8.17-1.25-13.43-.7-4.92.2-8.23-1.2-12.72-1.4-3.35-.54-4.86.78-7.77.7h-2.1c-.83-.12-1.27.15-1.42.7-.82-.6-1.9-.93-3.54-.7-.2-1.46-2.63-.67-2.83-2.13-1.4 0-.9-1.93-2.8-1.4.5-1.94-1.42-1.43-1.43-2.84-.95-.47-1.3-1.52-1.4-2.83-1.08-2-1.72-4.42-1.42-7.78-1.54.1-.32-2.52-.7-3.54-.96-.47-1.33-1.5-1.42-2.83v-6.36-3.54c.06-1 .1-2-.7-2.12-.1-1.25.85-1.48.7-2.8.06-1.02.1-2-.7-2.13v-5.66c.1-8.1.05-16.07-.72-23.3-.42-5.16 1.24-8.2.72-13.44.3-3.14-.5-5.15-1.42-7.07v-8.5c.35-3.16-.35-5.3-.7-7.76-.52-3.35.8-4.86.7-7.78.95-.46 1.32-1.5 1.42-2.83.93-.25 1.1-1.24 2.12-1.4-.13-2.5 2.4-2.34 2.83-4.25 1.3-.1 2.36-.47 2.82-1.4 1.47.28 1.87-.5 2.82-.72 2.18-.18 4-.72 5.66-1.4 5.5.53 8.97-.93 14.13-.72 9.9.23 19.18-.15 28.28-.7 1.14.2 1.22-.68 2.12-.72 9.4.5 18 1.8 28.27 1.42 2.4.2 5.73-.55 7.07.7.22-.95 1.77-.58 2.83-.7h3.53c4.56.1 9.9-.4 14.14.7" class="icon" fill="' . $icon_colour . '" fill-rule="evenodd"/><image src="' . $png_base . '_instagram_WEB.png" xlink:href=""></svg>',
	);

	$output = '<ul class="social-icons-list">';
	foreach ( $platforms as $platform ) {
		$button_label =  'page__footer' === $context ? '<span class="show-for-sr">' . $platform . '</span>' : '';

		$output .= '<li class="social-icons-list__item"><a class="social-icons-list__link link--' . $platform;
		if ( $share_buttons ) {
			$output .= '" title="' . sprintf( $link_titles[ $platform ], $exchange->type );
		} else {
			$output .= '" title="' . $link_titles[ $platform ];
		}
		$output .= '" target="_blank" href="' . $button_links[ $platform ] . '"><i class="social-icons-list__link__icon">'
				. $button_svgs[ $platform ] . '</i>' . $button_label . '</a></li>';
	}
	$output .= '</ul>';
	return $output;
}


/**
 * Retrieve description outside loop
 *
 * @return void.
 */
function exchange_get_share_description() {
	if ( is_single() || is_page() ) {
		global $post;
		switch ( $post->post_type ) {
			case 'page':
			case 'story':
				$description = get_post_meta( $post->ID, 'editorial_intro', true );
				break;
			case 'collaboration':
				$description = get_post_meta( $post->ID, 'description', true );
				break;
			default:
				break;
		}
		if ( isset( $description ) && ! empty( $description ) ) {
			echo esc_attr( $description );
		}
	}
}

/**
 * Retrieve image outside loop
 *
 * @return void.
 */
function exchange_get_share_image() {
	if ( function_exists( 'wp_get_attachment_thumb_url' ) ) {
		$src = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'medium' );
		if ( ! empty( $src ) ) {
			echo esc_attr( $src[0] );
		}
	}
}

/**
 * Retrieve title outside loop
 *
 * @return void.
 * @TODO create a filter instead.
 */
 function exchange_get_share_title() {
 	if ( is_single() || is_page() ) {
 		global $post;
 		switch ( $post->post_type ) {
 			case 'page':
 			case 'story':
 			case 'collaboration':
 				$title = $post->post_title;
 				break;
 			default:
 				break;
 		}
 		if ( isset( $title ) && ! empty( $title ) ) {
 			echo esc_attr( $title );
 		}
 	}
 }
